<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ethereal Tattoo</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;1,300&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #08060b;
    overflow: hidden;
    font-family: 'Cormorant Garamond', serif;
  }

  /* ノイズ（グレイン）オーバーレイ */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 100;
  }

  /* タトゥー背面の放射状アンビエントライト */
  .ambient {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: none;
  }

  .ambient::before {
    content: '';
    width: 500px;
    height: 500px;
    border-radius: 50%;
    background: radial-gradient(
      circle,
      rgba(180, 140, 220, 0.0) 0%,
      rgba(180, 140, 220, 0.0) 100%
    );
    animation: ambientPulse 6s ease-in-out infinite;
    animation-delay: 3.5s;
    filter: blur(60px);
  }

  @keyframes ambientPulse {
    0%, 100% {
      background: radial-gradient(
        circle,
        rgba(180, 140, 220, 0.06) 0%,
        rgba(140, 100, 190, 0.02) 40%,
        transparent 70%
      );
    }
    50% {
      background: radial-gradient(
        circle,
        rgba(200, 170, 240, 0.12) 0%,
        rgba(160, 120, 210, 0.05) 40%,
        transparent 70%
      );
    }
  }

  /* メインコンテナ */
  .tattoo-container {
    position: relative;
    width: 340px;
    height: 340px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* SVG本体 */
  .tattoo-svg {
    width: 280px;
    height: 280px;
    filter: url(#glow-filter);
    position: relative;
    z-index: 2;
  }

  .tattoo-svg path {
    fill: rgba(220, 200, 240, 0);
    stroke: rgba(200, 180, 240, 0.8);
    stroke-width: 1;
    stroke-linecap: round;
    stroke-linejoin: round;
    transition: fill 1.8s ease-in-out, stroke-width 1.8s ease-in-out;
  }

  .tattoo-svg path.fill-in {
    fill: rgba(230, 215, 248, 0.85);
    stroke-width: 0.3;
  }

  /* 描画完了後のグロウ脈動エフェクト */
  .glow-active .tattoo-svg {
    animation: glowPulse 4s ease-in-out infinite;
  }

  @keyframes glowPulse {
    0%, 100% {
      filter: url(#glow-filter);
    }
    50% {
      filter: url(#glow-filter-intense);
    }
  }

  /* 浮遊パーティクル */
  .particles {
    position: absolute;
    inset: -80px;
    z-index: 1;
    pointer-events: none;
  }

  .particle {
    position: absolute;
    width: 2px;
    height: 2px;
    background: rgba(200, 170, 240, 0.6);
    border-radius: 50%;
    opacity: 0;
    box-shadow: 0 0 4px rgba(200, 170, 240, 0.4);
  }

  /* 外周リング */
  .ritual-ring {
    position: absolute;
    width: 320px;
    height: 320px;
    border: 1px solid rgba(180, 150, 220, 0);
    border-radius: 50%;
    z-index: 1;
    animation: ringReveal 3s ease-out 5s forwards, ringPulse 5s ease-in-out 8s infinite;
  }

  @keyframes ringReveal {
    to {
      border-color: rgba(180, 150, 220, 0.12);
    }
  }

  @keyframes ringPulse {
    0%, 100% { border-color: rgba(180, 150, 220, 0.08); transform: scale(1); }
    50% { border-color: rgba(200, 170, 240, 0.18); transform: scale(1.02); }
  }

  .ritual-ring-inner {
    position: absolute;
    width: 296px;
    height: 296px;
    border: 1px solid rgba(180, 150, 220, 0);
    border-radius: 50%;
    z-index: 1;
    animation: ringReveal 3s ease-out 5.3s forwards, ringPulse 5s ease-in-out 8.3s infinite;
  }

  /* 下部テキスト */
  .inscription {
    position: fixed;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    color: rgba(180, 160, 210, 0);
    font-size: 13px;
    letter-spacing: 0.4em;
    text-transform: uppercase;
    font-weight: 300;
    font-style: italic;
    animation: textReveal 3s ease-out 6s forwards;
    z-index: 10;
    white-space: nowrap;
  }

  @keyframes textReveal {
    to { color: rgba(180, 160, 210, 0.35); }
  }

  /* 縦の装飾ライン */
  .vert-line {
    position: fixed;
    width: 1px;
    height: 0;
    background: linear-gradient(
      to bottom,
      transparent,
      rgba(180, 150, 220, 0.15),
      transparent
    );
    z-index: 1;
    animation: lineGrow 4s ease-out forwards;
  }
  .vert-line.left { left: 12%; top: 10%; animation-delay: 5.5s; }
  .vert-line.right { right: 12%; top: 15%; animation-delay: 5.8s; }

  @keyframes lineGrow {
    to { height: 70vh; }
  }

  /* スキャンラインエフェクト */
  .scanline {
    position: fixed;
    inset: 0;
    background: repeating-linear-gradient(
      to bottom,
      transparent,
      transparent 3px,
      rgba(0, 0, 0, 0.03) 3px,
      rgba(0, 0, 0, 0.03) 4px
    );
    pointer-events: none;
    z-index: 99;
  }
</style>
</head>
<body>

<!-- SVGフィルター定義 -->
<svg width="0" height="0" style="position:absolute">
  <defs>
    <filter id="glow-filter" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="2" result="blur1"/>
      <feColorMatrix in="blur1" type="matrix" result="colorBlur"
        values="1 0 0 0 0.05
                0 1 0 0 0
                0 0 1.2 0 0.1
                0 0 0 1 0"/>
      <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur2"/>
      <feColorMatrix in="blur2" type="matrix" result="colorBlur2"
        values="0.8 0 0.2 0 0.1
                0 0.6 0.3 0 0
                0.2 0.1 1.4 0 0.15
                0 0 0 0.5 0"/>
      <feMerge>
        <feMergeNode in="colorBlur2"/>
        <feMergeNode in="colorBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <filter id="glow-filter-intense" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="3" result="blur1"/>
      <feColorMatrix in="blur1" type="matrix" result="colorBlur"
        values="1 0 0 0 0.08
                0 1 0 0 0.02
                0 0 1.3 0 0.15
                0 0 0 1 0"/>
      <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur2"/>
      <feColorMatrix in="blur2" type="matrix" result="colorBlur2"
        values="0.9 0 0.3 0 0.15
                0 0.7 0.3 0 0.05
                0.3 0.1 1.5 0 0.2
                0 0 0 0.6 0"/>
      <feGaussianBlur in="SourceGraphic" stdDeviation="18" result="blur3"/>
      <feColorMatrix in="blur3" type="matrix" result="colorBlur3"
        values="0.6 0 0.4 0 0.1
                0 0.4 0.2 0 0
                0.3 0.1 1.2 0 0.2
                0 0 0 0.3 0"/>
      <feMerge>
        <feMergeNode in="colorBlur3"/>
        <feMergeNode in="colorBlur2"/>
        <feMergeNode in="colorBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
</svg>

<div class="ambient"></div>
<div class="vert-line left"></div>
<div class="vert-line right"></div>

<div class="tattoo-container">
  <div class="ritual-ring"></div>
  <div class="ritual-ring-inner"></div>
  <div class="particles" id="particles"></div>

  <svg class="tattoo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">
    <path d="m151.5 6.01c16.41 4.17 31.63 14.88 31.63 32.98 0 10.59-5.13 19.08-13.2 25.09-0.99-3.02-2.7-5.33-4.75-6.85 10.02-5.07 16.25-18.15 6.76-36.52 5.39 12.28-1.84 26.76-16.13 28.28-8.5 0.92-15.47-0.12-23.66 8.24 3.96-8.72 11.38-10.34 22.86-13.41-8.71-7.27-30.81-10.65-46.78 1.49 6.07 2.6 11.51 5.87 13.95 11.35-6.07-5.42-11.28-7.31-19.78-7.61-14.35-0.56-22.19-12.64-18.66-28.34-8.71 13.07-3.09 28.96 6.27 36.52-2.05 1.52-3.51 3.48-4.22 5.79-8.07-6.01-13.2-14.51-13.2-24.03 0-15.88 12.66-29.2 32.51-32.99-12.33 6.83-18.07 15.12-16.67 24.23 0.94 6.18 5.02 11.05 11.04 12.89 7.67-7.38 17.46-10.66 28.34-10.48 10.88 0.17 21.07 4.07 28.3 10.78 6.35-1.31 11-5.69 12.05-13.19 1.28-9.7-4.46-19.22-16.66-24.22z"/>
    <path d="m15.19 121.6c6.91 23.25 18.33 34.66 31.62 50.48 12.65 15.94 22.9 31.76 18.03 63.69 6.91-8.12 6.03-18.54 4.38-26.77 5.44-21.2-1.47-36.14-13.49-55.82 6.02 5.72 10.72 12.55 14.97 20.95 2.05 4.17 5.35 10 6.34 15.61 3.79-16.99-0.23-29.73-6.91-42.64-2.38-4.49-4.88-11.6-4.99-16.46 6.02 3.07 14.68 4.06 20.58-0.29 7.12-5.2 9.73-13.65 6.69-23.17 1.94 10.82-2.42 17.65-5.2 19.11 1.6-5.26-1.75-8.58-8.93-8.69-15.45-0.23-28.57-11.73-38.19-24.01 7.84 6.41 12.04 13.24 16.97 15.61 6.76 3.95 13.12 6.5 20.96 6.85 5.62 0.29 7.04 2.5 6.81 5.1-0.23 2.95-2.95 5.78-10.49 4-5.68-1.4-8.46-4-12.05-3.6-4.31 0.45-4.19 7.56 0.63 17.31 3.79 7.5 7.89 12.98 10.21 21.09 1.59 5.26 2.25 10.68-0.12 11.49-2.26-8.39-10.97-15.33-15.11-23.33-5.18-10.07-7.12-19.95-3.99-31.5-2.84 7.37-3.72 15.49 2.9 24.78 3.3 4.62 6.34 8.46 9.12 13.38-5.68-5.83-11.47-13.32-16.74-24.08-5.02-9.95-6.84-19.88-12.46-21.66 3.96 7.02 4.73 12.12 9.2 21.32 8.12 17.1 19.49 34.35 19.32 55.83-3.96-9.52-10.43-17.86-17.55-22.34 8.94 10.7 16.12 21.94 17.46 32.76-8.72-20.55-28.91-34.79-38.21-51.52-6.67-10.82-9.8-17.98-11.76-23.48z"/>
    <path d="m240.4 121.6c-6.91 23.25-18.33 34.66-31.62 50.48-12.65 15.94-22.9 31.76-18.03 63.69-6.91-8.12-7.03-18.08-4.87-26.77-4.42-16.38-0.68-31.53 13.06-51.97-6.97 7.38-11.22 13.71-18 32.71-2.66-16.5 1.87-29.73 8.99-42.64 3.53-6.29 5.43-12.75 1.02-17.96-5.8 3.38-13.99 4.54-19.89 0.2-7.12-5.21-10.02-12.09-7.41-21.61-1.94 9.52 1.47 15.99 5.83 19.2-1.6-5.27 1.75-8.59 8.93-8.7 13.45-0.86 26.34-11.99 38.36-28.5 6.07-8.23 5.59-17.69-4.08-38.13-1.94 5.48-4.78 8.65-8.85 11.09 8.44 1.21 11.34 8.42 10.63 15.06-1.28 9-9.55 14.57-12.79 19.99-0.99 1.72-0.93 3.4-0.93 6.23-1.6-1.52-1.94-3.9-2.11-6.23-4.53 7.56-10.43 11-17.77 10.6-7.54-0.4-10.73-5.14-10.67-9.24 0.17-6.98 9.48-13.39 21.66-12.58l-3.19-3.38c4.42 0.56 7.6 4 11.07 3.14 4.58-1.2 7.13-6.24 7.25-9.19 0.29-6.04-4.02-8.99-12.25-8.81-10.65 0.23-19.09 11.7-26 18.47-7.06 7.07-11.42 10.28-17.1 13.95-10.3 6.71-19.49 14.71-17.84 30.54 2.38-4.34 4.99-6.64 8.95-10.24 6.91 7.28 8.07 20.01 0.84 32.75-4.41 7.49-10.82 12.97-18.36 19.8l1.99 2.6c10.3-10.25 20.04-18.31 22.94-27.44 6.02 6.46 8.4 15.41 7.91 24.93-7.42 13.67-27.1 25.81-35.38 43.47-3.68 7.89-4.03 13.84-3.54 20.83 0.43 5.67 4.74 10.4 8.7 11.71 8.33-3.95 10.83-11.83 7.99-22.14 7.32-12.14 24.91-24.59 28.1-45.48 6.41-9.52 8.23-17.59 7.24-28.28-1.82-13.61-12.23-28.69-22.59-32.15 13.15 11.3 20.06 25.02 16.16 39.21-0.44 1.63-0.78 1.29-1.21-0.74-2.38-9.52-7.36-15.93-12.29-21.97-1.51-8.07-4.53-12.69-7.49-16.41 10.53-12.69 20.99-22.76 23.31-31.96-6.13 6.04-10.89 6.78-14.42 10.74-6.02 7.07-13.81 15.58-18.79 21.05-2.21-10.48 7.26-19.61 19.16-28.71 7.95-6.29 16-16.71 16-16.71 6.41-8.05 13.21-12.26 23.61-15.27 8.5-2.72 13.88-8.73 13.88-15.56 0-7.43-6.07-13.71-14.05-12.56 5.12-3.07 12.72-1.18 18.96 6.19 10.54 13.14 20.33 27.1 24.75 38.85 7.65 19.62 5.6 36-2.79 55.61-3.74 8.72-7.64 13.34-13.27 17.3 11.47-16.46 19.91-39 10.66-70.93 7.84 18.97 6.19 42.02-10.72 67.43-3.9 5.93-7.92 10.45-15.87 12.08 14.82-18.99 27.48-39.24 24.76-76.04-2.78 10.42-8.8 18.94-15.71 28.46-2.95 4.48-3.78 9.05-3.35 11.54-1.65-6.98 0.06-12.45 5.58-22.5 2.61-4.87 3.38-7.6 3.49-10.6-10.55 14.88-21.86 26.35-40.17 28.18-5.62 0.46-7.16 2.2-7.04 4.47 0.17 2.95 3.41 4.69 9.31 3.54 5.69-1.14 8.93-4.77 12.52-4.77 5.07 0 4.35 6.58 0.45 15.77-3.24 7.71-8.28 14.64-11.58 24.64-1.16 3.67-1.33 8.15 1.34 5.25 3.79-6.05 8.08-11.47 13.97-18.96 6.91-9.13 7.4-14.28 3.44-30.71 0.55 8.9-0.23 15.19-5.26 22.4-4.76 6.82-8.72 11.79-10.87 17.27 4.81-7.17 10.93-14.67 16.73-24.48 3.53-5.95 1.59-11.47-1.02-19.59 1.88 8.01-0.62 18.43-6.81 27.96-7.02 11.23-11.32 20.63-16.02 37.06-0.72 4.17-0.12 7.88 0.43 11.61 1.65-15.32 9.49-29.27 18.21-44.15 9.36-15.88 17.2-29.54 22.17-36.56-5.62 20.11-12.59 34.88-27.09 61.77-2.78 6.29-2.72 14.12-1.79 21.23 4.98-12.91 10.6-21.4 19.25-29.53-9.68 12.15-16.35 23.28-18.67 34.1 8.71-20.55 28.9-34.79 38.2-51.52 6.67-10.82 9.79-17.98 11.75-23.48zm-51.04-22.73 3.53-4.48c-6.47-3.95-14.8-3.55-18.44 2.64-2.5 4.33 0.4 8.67 5.93 8.67 6.47 0 11.76-3.56 14.81-9.85l-5.83 3.02zm-53.52 124.5c-5.43 6.71-6.83 9.72-5.43 11.75 2.78 2.03 0.68 9.86-2.62 10.09-3.53 0.29-5.13-6.06-4.96-9.53 0.94-15.55 12.31-27.05 31.41-45-3.59 10.82-9.39 21.35-18.4 32.69z"/>
    <path d="m151.1 54.84c-12.02-1.03-18.93 4.07-23.4 14.49-4.47-10.07-11.38-14.97-23.4-14.22-11.47 0.75-17.6 11.23-17.12 24.08 1.4 20.89 17.6 33.85 28 46 10.94 12.74 15.92 24.56 9.9 40.03-0.99 2.6-1.42 3.69-0.49 6.7 8.09-10.3 13.01-21.91 8.54-34.65-5.43-15.46-26.05-31.22-37.1-50.2 9.68 3.07 30.09 7.08 30.09 28.56 2.66-12.14-2.21-21.86-15.1-30.46-7.44-5.15-10.97-8.53-10.97-15 0-5.47 3.96-8.54 9.98-8.14 7.44 0.56 13.45 7.02 17.7 16.88 4.47-10.42 10.37-17.4 19.62-16.88 8.94 0.56 12.84 6.61 12.84 13.07 0 5.95-1.76 10.91-8.67 15.72 6.91-4.47 14.86-8.42 17.47-14.37 0.89-10.7-5.11-20.44-17.89-21.61z"/>
    <path d="m146.2 66.22c7.44 0.92 8.89 8.42 6.89 15.92-1.94 6.97-8.4 12.44-15.9 21.55-6.02 6.98-9.05 13.92-7.46 20.89 1.28-8.49 5.59-15.43 16.53-24.95 8.44-7.5 11.34-12.96 10.85-20.46-0.49-6.93-3.47-12.4-10.91-12.95z"/>
    <path d="m103.6 121.6c-12.44 9.1-19.35 20.91-18.36 38.35 0.99 17.46 3.43 33.89 17.17 49.77 6.02 6.46 12.54 11.58 14.98 19.05 1.5-7.47 0.51-8.67-4.92-16.17-12.02-14.88-18.94-28.83-17-43.59 0.99-6.97 2.98-12.44 5.88-16.91 2.5 11.45 10.39 19.52 18.83 29.04 7.42 8.06 8.58 15.52 5.05 21.47 5.92-6.46 8.42-15.98-0.08-25.09-13.44-14.42-22.86-27.15-15.36-56.72-4.98 5.47-7.7 10.95-9.2 19.14-4.98 7.49-8.11 13.44-9.93 17.92-1.05-13.72 2.42-27.8 12.94-36.26z"/>
    <path d="m123.3 137.2c-5.42 10.3-4.43 22.12 0 31.17-0.99-9.52 0.52-17.64 2.46-23.58-0.43-2.6-0.98-5.56-2.46-7.59z"/>
    <path d="m102.7 162.6c-3.53 8.52-2.6 18.94 6.71 26.44 6.02 4.47 9.98 10.99 13.94 14.95-2.84-7.46-2.67-12.93-2.18-16.39l-2.9-4.48-0.99 3.99c-4.47-4.48-14.26-5.57-14.58-24.51z"/>
    <path d="m62.92 60.84c-8.5-2.72-13.42-8.73-13.42-15.56 0-7.43 6.02-13.71 14-12.56-6.02-3.07-13.62-1.18-19.86 7.1-10.54 14.48-20.33 26.19-24.75 39.37-7.44 20.44-5.85 36.32 2.59 54.18 4.92 9.92 8.77 13.26 13.69 16.27-11.48-16.99-19.92-34.96-9.46-70.22-6.53 24.39-2.05 44.51 11.39 66.6 4.42 7.17 8.38 10.25 12.85 12.6-12.34-18.98-22.64-38.59-20.03-67.45 4.47 9.52 9.39 13.48 13.86 21.54 1.94 3.58 2.17 6.9 1.94 9.39 1.6-6.04 0.2-11.99-5.82-21.51-6.47-9.97-8.41-16.43-4.99-28.57 1.94-7.5 3.93-11.45 7.83-20.41 1.94 4.91 4.32 7.86 7.85 10.3-8.44 2.43-11.34 9.59-10.63 16.22 1.28 8.05 8.72 13.15 13.19 19.1 0.99 1.52 1.27 3.25 1.27 5.86 1.6-1.52 2.03-3.55 2.2-5.86 5.48 7.5 10.4 10.94 18.84 10.94 7.44 0 10.79-4.62 10.56-9.26-0.43-6.98-9.09-11.76-19.97-11.76l1.4-3.07c-3.96 0.55-6.28 3.07-10.29 2.5-5.63-0.86-8.65-6.33-8.71-9.48-0.11-6.04 4.2-8.99 12.43-8.58 8.5 0.4 15.82 6.44 23.76 11.9l0.49-7.95c-6.91-5.95-12.93-9.02-22.21-11.63z"/>
  </svg>
</div>

<div class="inscription">invocatio aeterna</div>
<div class="scanline"></div>

<script>
(function() {
  // ================================================================
  // SVGパスのストローク描画アニメーション
  //
  // 仕組み:
  //   1. getTotalLength() でパスの全長を取得
  //   2. stroke-dasharray にその長さを設定（破線パターン = パス全長）
  //   3. stroke-dashoffset を全長にすると線が完全に隠れる
  //   4. offset を 0 にアニメーションすると「描かれていく」表現になる
  // ================================================================
  const paths = document.querySelectorAll('.tattoo-svg path');

  // 各パスの開始遅延（秒）- パーツごとに時間差をつけて順番に描かれるようにする
  const staggerDelays = [0.3, 0.8, 1.3, 1.8, 2.6, 3.0, 3.3, 3.1, 2.4];
  // 各パスの描画にかける時間（秒）- 複雑なパスほど長く設定
  const drawDurations = [2.5, 3.5, 4.0, 3.0, 2.0, 3.2, 1.5, 1.8, 3.8];

  // 全パスの描画完了時刻を追跡（後続エフェクトのトリガーに使う）
  let maxEndTime = 0;

  paths.forEach((path, i) => {
    const len = path.getTotalLength();
    const delay = staggerDelays[i] || i * 0.5;
    const dur = drawDurations[i] || 3;

    // パスを非表示にする: dasharray = 全長、dashoffset = 全長で線が見えない状態
    path.style.strokeDasharray = len;
    path.style.strokeDashoffset = len;

    // パスごとに固有の @keyframes を動的生成
    // （各パスの長さが異なるため、それぞれ個別のキーフレームが必要）
    const animName = `drawPath${i}`;
    const sheet = document.createElement('style');
    sheet.textContent = `
      @keyframes ${animName} {
        0%   { stroke-dashoffset: ${len}; }
        100% { stroke-dashoffset: 0; }
      }
    `;
    document.head.appendChild(sheet);

    // cubic-bezier(0.4, 0, 0.2, 1) = Material Designの標準イージング
    // forwards = アニメーション終了後、最終状態を維持
    path.style.animation = `${animName} ${dur}s cubic-bezier(0.4, 0, 0.2, 1) ${delay}s forwards`;

    const endTime = delay + dur;
    if (endTime > maxEndTime) maxEndTime = endTime;

    // ストロークが70%描かれた時点でフィル（塗り）をフェードイン
    // → 線が描き終わる少し前から色が染み出すような表現
    setTimeout(() => {
      path.classList.add('fill-in');
    }, (delay + dur * 0.7) * 1000);
  });

  // ================================================================
  // フローティングパーティクル
  //
  // SVGの周囲に小さな光の粒を浮遊させて幻想的な雰囲気を演出する。
  // 各パーティクルは極座標でランダム配置し、個別のアニメーションで
  // ふわふわと漂う動きを表現する。
  // ================================================================
  const particlesContainer = document.getElementById('particles');
  const PARTICLE_COUNT = 30;

  for (let i = 0; i < PARTICLE_COUNT; i++) {
    const p = document.createElement('div');
    p.className = 'particle';

    // 極座標（角度 + 半径）でSVGの周囲にランダム配置
    const angle = Math.random() * Math.PI * 2;
    const radius = 100 + Math.random() * 120;
    const x = Math.cos(angle) * radius + 200;
    const y = Math.sin(angle) * radius + 200;
    p.style.left = x + 'px';
    p.style.top = y + 'px';

    // パーティクルのサイズ: 1〜3px のランダム
    p.style.width = (1 + Math.random() * 2) + 'px';
    p.style.height = p.style.width;

    const dur = 3 + Math.random() * 5;       // 周期: 3〜8秒
    const delay = Math.random() * 8 + 4;      // 開始遅延: 4〜12秒（描画後に出現）
    const driftX = (Math.random() - 0.5) * 40; // X方向の漂流量: -20〜20px
    const driftY = (Math.random() - 0.5) * 40; // Y方向の漂流量: -20〜20px

    p.style.animation = `particleFloat${i} ${dur}s ease-in-out ${delay}s infinite`;

    // 各パーティクルに固有のキーフレームを生成
    // opacity をランダムにすることで、粒ごとに明滅のタイミングが異なり自然に見える
    const keyframes = `
      @keyframes particleFloat${i} {
        0%, 100% {
          opacity: 0;
          transform: translate(0, 0);
        }
        20% {
          opacity: ${0.3 + Math.random() * 0.5};
        }
        50% {
          opacity: ${0.2 + Math.random() * 0.6};
          transform: translate(${driftX}px, ${driftY}px);
        }
        80% {
          opacity: ${0.1 + Math.random() * 0.3};
        }
      }
    `;
    const style = document.createElement('style');
    style.textContent = keyframes;
    document.head.appendChild(style);

    particlesContainer.appendChild(p);
  }

  // ================================================================
  // グロウパルスの起動
  //
  // 全パスの描画が完了してから0.5秒後に、SVG全体に脈動するグロウ
  // エフェクトを開始する。CSSの .glow-active クラスにより
  // glow-filter と glow-filter-intense を交互に切り替えるアニメーション。
  // ================================================================
  setTimeout(() => {
    document.querySelector('.tattoo-container').classList.add('glow-active');
  }, maxEndTime * 1000 + 500);
})();
</script>
</body>
</html>
